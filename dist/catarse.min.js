/*
    Catarse JS components
    Copyright (c) 2007 - 2015 Diogo Biazus
    Licensed under the MIT license
    Version: 0.0.6
*/
window.c=function(){return{models:{},pages:{},admin:{},project:{},h:{}}}(),window.c.h=function(a,b){var c=function(a,c){return c=c||"DD/MM/YYYY",a?b(a).format(c):"no date"},d=function(a,c){var d=b(a,c||"DD/MM/YYYY");return d.isValid()?d:b(a)},e=function(a,b){return function(c,d,e){if(null===c||void 0===c)return null;var f="\\d(?=(\\d{"+(e||3)+"})+"+(d>0?"\\D":"$")+")",g=c.toFixed(Math.max(0,~~d));return(b?g.replace(".",b):g).replace(new RegExp(f,"g"),"$&"+(a||","))}},f=e(".",","),g=function(b,c){var d=a.prop(b);return d.toggle=function(){d(d()===c?b:c)},d},h=a.postgrest.filtersVM({id:"eq"}),i=function(){return a('.u-text-center.u-margintop-30[style="margin-bottom:-110px;"]',[a('img[alt="Loader"][src="https://s3.amazonaws.com/catarse.files/loader.gif"]')])};return{momentify:c,momentFromString:d,formatNumber:f,idVM:h,toggleProp:g,loader:i}}(window.m,window.moment),window.c.models=function(a){var b=a.postgrest.model("contribution_details"),c=a.postgrest.model("contributions"),d=a.postgrest.model("team_totals"),e=a.postgrest.model("project_details"),f=a.postgrest.model("project_contributions_per_day"),g=a.postgrest.model("project_contributions_per_location"),h=a.postgrest.model("team_members");return h.pageSize(40),{contributionDetail:b,contributions:c,projectDetail:e,teamTotal:d,teamMember:h,projectContributionsPerDay:f,projectContributionsPerLocation:g}}(window.m),window.c.admin.Contributions=function(a,b,c){var d=b.admin;return{controller:function(){var c=d.contributionListVM,e=d.contributionFilterVM,f=a.prop(""),g=[{component:"AdminUser",wrapperClass:".w-col.w-col-4"},{component:"AdminProject",wrapperClass:".w-col.w-col-4"},{component:"AdminContribution",wrapperClass:".w-col.w-col-2"},{component:"PaymentStatus",wrapperClass:".w-col.w-col-2"}],h=[{component:"AdminInputAction",data:{getKey:"user_id",updateKey:"contribution_id",callToAction:"Transferir",innerLabel:"Id do novo apoiador:",outerLabel:"Transferir Apoio",placeholder:"ex: 129908",model:b.models.contributions,updateModel:b.models.contributionDetail}}],i=[{component:"FilterMain",data:{vm:e.full_text_index,placeholder:"Busque por projeto, email, Ids do usuário e do apoio..."}},{component:"FilterDropdown",data:{label:"Com o estado",name:"state",vm:e.state,options:[{value:"",option:"Qualquer um"},{value:"paid",option:"paid"},{value:"refused",option:"refused"},{value:"pending",option:"pending"},{value:"pending_refund",option:"pending_refund"},{value:"refunded",option:"refunded"},{value:"chargeback",option:"chargeback"},{value:"deleted",option:"deleted"}]}},{component:"FilterDropdown",data:{label:"gateway",name:"gateway",vm:e.gateway,options:[{value:"",option:"Qualquer um"},{value:"Pagarme",option:"Pagarme"},{value:"MoIP",option:"MoIP"},{value:"PayPal",option:"PayPal"},{value:"Credits",option:"Créditos"}]}},{component:"FilterNumberRange",data:{label:"Valores entre",first:e.value.gte,last:e.value.lte}},{component:"FilterDateRange",data:{label:"Período do apoio",first:e.created_at.gte,last:e.created_at.lte}}],j=function(){return c.firstPage(e.parameters()).then(null,function(a){f(a.message)}),!1};return{filterVM:e,filterBuilder:i,itemActions:h,itemBuilder:g,listVM:{list:c,error:f},submit:j}},view:function(c){return[a.component(b.AdminFilter,{form:c.filterVM.formDescriber,filterBuilder:c.filterBuilder,submit:c.submit}),a.component(b.AdminList,{vm:c.listVM,itemBuilder:c.itemBuilder,itemActions:c.itemActions})]}}}(window.m,window.c,window.c.h),window.c.admin.contributionFilterVM=function(a,b,c){var d=a.postgrest.filtersVM({full_text_index:"@@",state:"eq",gateway:"eq",value:"between",created_at:"between"});return d.state(""),d.gateway(""),d.order({id:"desc"}),d.created_at.lte.toFilter=function(){return b.momentFromString(d.created_at.lte()).endOf("day").format("")},d.created_at.gte.toFilter=function(){return b.momentFromString(d.created_at.gte()).format()},d.full_text_index.toFilter=function(){return c(d.full_text_index())},d}(window.m,window.c.h,window.replaceDiacritics),window.c.admin.contributionListVM=function(a,b){return a.postgrest.paginationVM(b.contributionDetail.getPageWithToken)}(window.m,window.c.models),window.c.AdminContribution=function(a,b){return{view:function(c,d){var e=d.item;return a(".w-row.admin-contribution",[a(".fontweight-semibold.lineheight-tighter.u-marginbottom-10.fontsize-small","R$"+e.value),a(".fontsize-smallest.fontcolor-secondary",b.momentify(e.created_at,"DD/MM/YYYY HH:mm[h]")),a(".fontsize-smallest",["ID do Gateway: ",a('a.alt-link[target="_blank"][href="https://dashboard.pagar.me/#/transactions/'+e.gateway_id+'"]',e.gateway_id)])])}}}(window.m,window.c.h),window.c.AdminDetail=function(a,b,c){return{controller:function(){},view:function(d,e){var f=e.actions,g=e.item;return a("#admin-contribution-detail-box",[a(".divider.u-margintop-20.u-marginbottom-20"),a(".w-row.u-marginbottom-30",b.map(f,function(b){return a.component(c[b.component],{data:b.data,item:e.item})})),a(".w-row.card.card-terciary.u-radius",[a.component(c.AdminTransaction,{contribution:g}),a.component(c.AdminTransactionHistory,{contribution:g}),a.component(c.AdminReward,{contribution:g,key:g.key})])])}}}(window.m,window._,window.c),window.c.AdminFilter=function(a,b,c,d){return{controller:function(){return{toggler:d.toggleProp(!1,!0)}},view:function(d,e){var f=e.filterBuilder,g=c.findWhere(f,{component:"FilterMain"});return b("#admin-contributions-filter.w-section.page-header",[b(".w-container",[b(".fontsize-larger.u-text-center.u-marginbottom-30","Apoios"),b(".w-form",[b("form",{onsubmit:e.submit},[c.findWhere(f,{component:"FilterMain"})?b.component(a[g.component],g.data):"",b(".u-marginbottom-20.w-row",b('button.w-col.w-col-12.fontsize-smallest.link-hidden-light[style="background: none; border: none; outline: none; text-align: left;"][type="button"]',{onclick:d.toggler.toggle},"Filtros avançados  >")),d.toggler()?b("#advanced-search.w-row.admin-filters",[c.map(f,function(c){return"FilterMain"!==c.component?b.component(a[c.component],c.data):""})]):""])])])])}}}(window.c,window.m,window._,window.c.h),window.c.AdminInputAction=function(a,b,c){return{controller:function(c){var d=c.data,e=a.prop(!1),f=a.prop(!1),g=(a.prop(!1),{}),h=c.item,i=d.getKey,j=a.prop(""),k=a.postgrest.filtersVM({contribution_id:"eq"});b.idVM.id(h[d.updateKey]),k.contribution_id(h.contribution_id);var l=a.postgrest.loaderWithToken(d.model.patchOptions(b.idVM.parameters(),g)),m=function(){d.updateModel.getRowWithToken(k.parameters()).then(function(a){_.map(Object.keys(a[0]),function(b){h[b]=a[0][b]}),e(!0)})},n=function(){return g[i]=j(),l.load().then(m,f),!1},o=function(a,b,c){c.onunload=function(){e(!1),j("")}};return{complete:e,error:f,l:l,newValue:j,submit:n,toggler:b.toggleProp(!1,!0),unload:o}},view:function(b,c){var d=c.data,e=b.l()?"por favor, aguarde...":d.callToAction;return a(".w-col.w-col-2",[a("button.btn.btn-small.btn-terciary",{onclick:b.toggler.toggle},d.outerLabel),b.toggler()?a(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:b.unload},[a("form.w-form",{onsubmit:b.submit},b.complete()?b.error()?[a('.w-form-error[style="display:block;"]',[a("p","Houve um problema na requisição. O apoio não foi transferido!")])]:[a('.w-form-done[style="display:block;"]',[a("p","Apoio transferido com sucesso!")])]:[a("label",d.innerLabel),a('input.w-input.text-field[type="text"][placeholder="'+d.placeholder+'"]',{onchange:a.withAttr("value",b.newValue),value:b.newValue()}),a('input.w-button.btn.btn-small[type="submit"][value="'+e+'"]')])]):""])}}}(window.m,window.c.h,window.c),window.c.AdminItem=function(a,b,c,d){return{controller:function(a){var b=c.toggleProp(!1,!0);return{displayDetailBox:b}},view:function(c,e){var f=e.item;return a(".w-clearfix.card.u-radius.u-marginbottom-20.results-admin-items",[a(".w-row",[b.map(e.builder,function(b){return a(b.wrapperClass,[a.component(d[b.component],{item:f,key:f.key})])})]),a("button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary",{onclick:c.displayDetailBox.toggle}),c.displayDetailBox()?a.component(d.AdminDetail,{item:f,actions:e.actions,key:f.key}):""])}}}(window.m,window._,window.c.h,window.c),window.c.AdminList=function(a,b,c){c.admin;return{controller:function(a){var b=a.vm.list;!b.collection().length&&b.firstPage&&b.firstPage().then(null,function(b){a.vm.error(b.message)})},view:function(d,e){var f=e.vm.list,g=e.vm.error;return a(".w-section.section",[a(".w-container",g()?a(".card.card-error.u-radius.fontweight-bold",g()):[a(".w-row.u-marginbottom-20",[a(".w-col.w-col-9",[a(".fontsize-base",f.isLoading()?"Buscando apoios...":[a("span.fontweight-semibold",f.total())," apoios encontrados"])])]),a("#admin-contributions-list.w-container",[f.collection().map(function(b){return a.component(c.AdminItem,{builder:e.itemBuilder,actions:e.itemActions,item:b,key:b.key})}),a(".w-section.section",[a(".w-container",[a(".w-row",[a(".w-col.w-col-2.w-col-push-5",[f.isLoading()?b.loader():a("button#load-more.btn.btn-medium.btn-terciary",{onclick:f.nextPage},"Carregar mais")])])])])])])])}}}(window.m,window.c.h,window.c),window.c.AdminProjectDetailsCard=function(a,b){return{controller:function(b){var c=b.resource,d=function(){var b=a.prop({}),d={online:{cssClass:"text-success",text:"NO AR"},successful:{cssClass:"text-success",text:"FINANCIADO"},failed:{cssClass:"text-error",text:"NÃO FINANCIADO"},waiting_funds:{cssClass:"text-waiting",text:"AGUARDANDO"},rejected:{cssClass:"text-error",text:"RECUSADO"},draft:{cssClass:"",text:"RASCUNHO"},in_analysis:{cssClass:"",text:"EM ANÁLISE"},approved:{cssClass:"text-success",text:"APROVADO"}};return b(d[c.state]),b},e=function(){var b=a.prop({}),d={days:"dias",minutes:"minutos",hours:"horas",seconds:"segundos"};return b({unit:d[c.remaining_time.unit||"seconds"],total:c.remaining_time.total}),b};return{project:c,statusTextObj:d(),remainingTextObj:e()}},view:function(c){var d=c.project,e=d.progress.toFixed(2),f=c.statusTextObj(),g=c.remainingTextObj();return a(".project-details-card.card.u-radius.card-terciary.u-marginbottom-20",[a("div",[a(".fontsize-small.fontweight-semibold",[a("span.fontcolor-secondary","Status:")," ",a("span",{"class":f.cssClass},f.text)," "]),function(){return d.is_published?[a(".meter.u-margintop-20.u-marginbottom-10",[a(".meter-fill",{style:{width:(e>100?100:e)+"%"}})]),a(".w-row",[a(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[a(".fontweight-semibold.fontsize-large.lineheight-tight",e+"%"),a(".fontcolor-secondary.lineheight-tighter.fontsize-small.u-marginbottom-10","financiado")]),a(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[a(".fontweight-semibold.fontsize-large.lineheight-tight",["R$ "+b.formatNumber(d.pledged,2)]),a(".fontcolor-secondary.lineheight-tighter.fontsize-small.u-marginbottom-10","levantados")]),a(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[a(".fontweight-semibold.fontsize-large.lineheight-tight",d.total_contributions),a(".fontcolor-secondary.lineheight-tighter.fontsize-small","apoios")]),a(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[a(".fontweight-semibold.fontsize-large.lineheight-tight",g.total),a(".fontcolor-secondary.lineheight-tighter.fontsize-small",g.unit+" restantes")])])]:void 0}()])])}}}(window.m,window.c.h),window.c.AdminProjectDetailsExplanation=function(a,b){return{controller:function(c){var d=function(c){var d={online:[a("span","Você pode receber apoios até 23hs59min59s do dia "+b.momentify(c.expires_at)+". Lembre-se, é tudo-ou-nada e você só levará os recursos captados se bater a meta dentro desse prazo.")],successful:[a("span.fontweight-semibold",c.user.name+", comemore que você merece!")," Seu projeto foi bem sucedido e agora é a hora de iniciar o trabalho de relacionamento com seus apoiadores! ","Atenção especial à entrega de recompensas. Prometeu? Entregue! Não deixe de olhar a seção de pós-projeto do ",a('a.alt-link[href="/guides"]',"Guia dos Realizadores")," e de informar-se sobre ",a('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="_blank"]',"como o repasse do dinheiro será feito.")],waiting_funds:[a("span.fontweight-semibold",c.user.name+", estamos processando os últimos pagamentos!")," Seu projeto foi finalizado em "+b.momentify(c.expires_at)+" e está aguardando confirmação de boletos e pagamentos. ","Devido à data de vencimento de boletos, projetos que tiveram apoios de última hora ficam por até 4 dias úteis nesse status, contados a partir da data de finalização do projeto. ",a('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="_blank"]',"Entenda como o repasse de dinheiro é feito para projetos bem sucedidos.")],failed:[a("span.fontweight-semibold",c.user.name+", não desanime!")," Seu projeto não bateu a meta e sabemos que isso não é a melhor das sensações. Mas não desanime. ","Encare o processo como um aprendizado e não deixe de cogitar uma segunda tentativa. Não se preocupe, todos os seus apoiadores receberão o dinheiro de volta. ",a('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos"][target="_blank"]',"Entenda como fazemos estornos e reembolsos.")],rejected:[a("span.fontweight-semibold",c.user.name+", infelizmente não foi desta vez.")," Você enviou seu projeto para análise do Catarse e entendemos que ele não está de acordo com o perfil do site. ","Ter um projeto recusado não impede que você envie novos projetos para avaliação ou reformule seu projeto atual. ","Converse com nosso atendimento! Recomendamos que você dê uma boa olhada nos ",a('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos"][target="_blank"]',"critérios da plataforma")," e no ",a('a.alt-link[href="/guides"]',"guia dos realizadores"),"."],draft:[a("span.fontweight-semibold",c.user.name+", construa o seu projeto!")," Quanto mais cuidadoso e bem formatado for um projeto, maiores as chances de ele ser bem sucedido na sua campanha de captação. ","Antes de enviar seu projeto para a nossa análise, preencha todas as abas ao lado com carinho. Você pode salvar as alterações e voltar ao rascunho de projeto quantas vezes quiser. ","Quando tudo estiver pronto, clique no botão ENVIAR e entraremos em contato para avaliar o seu projeto."],in_analysis:[a("span.fontweight-semibold",c.user.name+", você enviou seu projeto para análise em "+b.momentify(c.sent_to_analysis_at)+" e receberá nossa avaliação em até 4 dias úteis após o envio!")," Enquanto espera a sua resposta, você pode continuar editando o seu projeto. ","Recomendamos também que você vá coletando feedback com as pessoas próximas e planejando como será a sua campanha."],approved:[a("span.fontweight-semibold",c.user.name+"Nome do realizador, seu projeto foi aprovado!")," Para colocar o seu projeto no ar é preciso apenas que você preencha os dados necessários na aba ",a('a.alt-link[href="#user_settings"]',"Conta"),". É importante saber que cobramos a taxa de 13% do valor total arrecadado apenas por projetos bem sucedidos. Entenda ",a('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="_blank"]',"como fazemos o repasse do dinheiro.")]};return d[c.state]};return{explanation:d(c.resource)}},view:function(b,c){return a("p."+c.resource.state+"-project-text.fontsize-small.lineheight-loose",b.explanation)}}}(window.m,window.c.h),window.c.AdminProject=function(a,b){return{view:function(c,d){var e=d.item;return a(".w-row.admin-project",[a(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[a("img.thumb-project.u-radius[src="+e.project_img+"][width=50]")]),a(".w-col.w-col-9.w-col-small-9",[a(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[a('a.alt-link[target="_blank"][href="/'+e.permalink+'"]',e.project_name)]),a(".fontsize-smallest.fontweight-semibold",e.project_state),a(".fontsize-smallest.fontcolor-secondary",b.momentify(e.project_online_date)+" a "+b.momentify(e.project_expires_at))])])}}}(window.m,window.c.h),window.c.AdminReward=function(a,b,c){return{view:function(d,e){var f=e.contribution.reward||{},g=parseInt(f.paid_count)+parseInt(f.waiting_payment_count);return a(".w-col.w-col-4",[a(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Recompensa"),a(".fontsize-smallest.lineheight-looser",c.isEmpty(f)?"Apoio sem recompensa.":["ID: "+f.id,a("br"),"Valor mínimo: R$"+b.formatNumber(f.minimum_value,2,3),a("br"),a.trust("Disponíveis: "+g+" / "+(f.maximum_contributions||"&infin;")),a("br"),"Aguardando confirmação: "+f.waiting_payment_count,a("br"),"Descrição: "+f.description])])}}}(window.m,window.c.h,window._),window.c.AdminTransactionHistory=function(a,b,c){return{controller:function(a){var d=a.contribution,e=c.reduce([{date:d.paid_at,name:"Apoio confirmado"},{date:d.pending_refund_at,name:"Reembolso solicitado"},{date:d.refunded_at,name:"Estorno realizado"},{date:d.created_at,name:"Apoio criado"},{date:d.refused_at,name:"Apoio cancelado"},{date:d.deleted_at,name:"Apoio excluído"},{date:d.chargeback_at,name:"Chargeback"}],function(a,c){return null!==c.date&&void 0!==c.date?(c.originalDate=c.date,c.date=b.momentify(c.date,"DD/MM/YYYY, HH:mm"),a.concat(c)):a},[]);return{orderedEvents:c.sortBy(e,"originalDate")}},view:function(b){return a(".w-col.w-col-4",[a(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico da transação"),b.orderedEvents.map(function(b){return a(".w-row.fontsize-smallest.lineheight-looser.date-event",[a(".w-col.w-col-6",[a(".fontcolor-secondary",b.date)]),a(".w-col.w-col-6",[a("div",b.name)])])})])}}}(window.m,window.c.h,window._),window.c.AdminTransaction=function(a,b){return{view:function(c,d){var e=d.contribution;return a(".w-col.w-col-4",[a(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Detalhes do apoio"),a(".fontsize-smallest.lineheight-looser",["Valor: R$"+b.formatNumber(e.value,2,3),a("br"),"Taxa: R$"+b.formatNumber(e.gateway_fee,2,3),a("br"),"Aguardando Confirmação: "+(e.waiting_payment?"Sim":"Não"),a("br"),"Anônimo: "+(e.anonymous?"Sim":"Não"),a("br"),"Id pagamento: "+e.gateway_id,a("br"),"Apoio: "+e.contribution_id,a("br"),"Chave: \n",a("br"),e.key,a("br"),"Meio: "+e.gateway,a("br"),"Operadora: "+(e.gateway_data&&e.gateway_data.acquirer_name),a("br"),function(){return e.is_second_slip?[a('a.link-hidden[href="#"]',"Boleto bancário")," ",a("span.badge","2a via")]:void 0}()])])}}}(window.m,window.c.h),window.c.AdminUser=function(a){return{view:function(b,c){var d=c.item,e=function(){return d.user_profile_img||"/assets/catarse_bootstrap/user.jpg"};return a(".w-row.admin-user",[a(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[a('img.user-avatar[src="'+e()+'"]')]),a(".w-col.w-col-9.w-col-small-9",[a(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[a('a.alt-link[target="_blank"][href="/users/'+d.user_id+'/edit"]',d.user_name)]),a(".fontsize-smallest","Usuário: "+d.user_id),a(".fontsize-smallest.fontcolor-secondary","Catarse: "+d.email),a(".fontsize-smallest.fontcolor-secondary","Gateway: "+d.payer_email)])])}}}(window.m),window.c.FilterDateRange=function(a){return{view:function(b,c){return a(".w-col.w-col-3.w-col-small-6",[a('label.fontsize-smaller[for="'+c.index+'"]',c.label),a(".w-row",[a(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[a('input.w-input.text-field.positive[id="'+c.index+'"][type="text"]',{onchange:a.withAttr("value",c.first),value:c.first()})]),a(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[a(".fontsize-smaller.u-text-center.lineheight-looser","e")]),a(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[a('input.w-input.text-field.positive[type="text"]',{onchange:a.withAttr("value",c.last),value:c.last()})])])])}}}(window.m),window.c.FilterDropdown=function(a,b){return{view:function(c,d){return a(".w-col.w-col-3.w-col-small-6",[a('label.fontsize-smaller[for="'+d.index+'"]',d.label),a('select.w-select.text-field.positive[id="'+d.index+'"]',{onchange:a.withAttr("value",d.vm),value:d.vm()},[b.map(d.options,function(b){return a('option[value="'+b.value+'"]',b.option)})])])}}}(window.m,window._),window.c.FilterMain=function(a){return{view:function(b,c){return a(".w-row",[a(".w-col.w-col-10",[a('input.w-input.text-field.positive.medium[placeholder="'+c.placeholder+'"][type="text"]',{onchange:a.withAttr("value",c.vm),value:c.vm()})]),a(".w-col.w-col-2",[a('input#filter-btn.btn.btn-large.u-marginbottom-10[type="submit"][value="Buscar"]')])])}}}(window.m),window.c.FilterNumberRange=function(a){return{view:function(b,c){return a(".w-col.w-col-3.w-col-small-6",[a('label.fontsize-smaller[for="'+c.index+'"]',c.label),a(".w-row",[a(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[a('input.w-input.text-field.positive[id="'+c.index+'"][type="text"]',{onchange:a.withAttr("value",c.first),value:c.first()})]),a(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[a(".fontsize-smaller.u-text-center.lineheight-looser","e")]),a(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[a('input.w-input.text-field.positive[type="text"]',{onchange:a.withAttr("value",c.last),value:c.last()})])])])}}}(window.m),window.c.PaymentStatus=function(a){return{controller:function(b){var c,d,e,f=b.item,g=null;return g=function(){if(f.gateway_data)switch(f.gateway.toLowerCase()){case"moip":return{first_digits:f.gateway_data.cartao_bin,last_digits:f.gateway_data.cartao_final,brand:f.gateway_data.cartao_bandeira};case"pagarme":return{first_digits:f.gateway_data.card_first_digits,last_digits:f.gateway_data.card_last_digits,brand:f.gateway_data.card_brand}}},c=function(){switch(f.payment_method.toLowerCase()){case"boletobancario":return a("span#boleto-detail","");case"cartaodecredito":var b=g();return b?a("#creditcard-detail.fontsize-smallest.fontcolor-secondary.lineheight-tight",[b.first_digits+"******"+b.last_digits,a("br"),b.brand+" "+f.installments+"x"]):""}},d=function(){switch(f.payment_method.toLowerCase()){case"boletobancario":return".fa-barcode";case"cartaodecredito":return".fa-credit-card";default:return".fa-question"}},e=function(){switch(f.state){case"paid":return".text-success";case"refunded":return".text-refunded";case"pending":case"pending_refund":return".text-waiting";default:return".text-error"}},{displayPaymentMethod:c,paymentMethodClass:d,stateClass:e}},view:function(b,c){var d=c.item;return a(".w-row.payment-status",[a(".fontsize-smallest.lineheight-looser.fontweight-semibold",[a("span.fa.fa-circle"+b.stateClass())," "+d.state]),a(".fontsize-smallest.fontweight-semibold",[a("span.fa"+b.paymentMethodClass())," ",a('a.link-hidden[href="#"]',d.payment_method)]),a(".fontsize-smallest.fontcolor-secondary.lineheight-tight",[b.displayPaymentMethod()])])}}}(window.m),window.c.ProjectChartContributionAmountPerDay=function(a,b,c,d){return{controller:function(a){var e=a.collection()[0],f=function(){return[{label:"R$ arrecadados por dia",fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:c.map(e.source,function(a){return a.total_amount})}]},g=function(a,g){if(!g){Object.defineProperty(a,"offsetHeight",{get:function(){return a.height}}),Object.defineProperty(a,"offsetWidth",{get:function(){return a.width}});var h=a.getContext("2d");new b(h).Line({labels:c.map(e.source,function(a){return d.momentify(a.paid_at)}),datasets:f()})}};return{renderChart:g}},view:function(b){return a(".card.u-radius.medium.u-marginbottom-30",[a(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","R$ arrecadados por dia"),a(".w-row",[a(".w-col.w-col-12",[a('canvas[id="chart"][width="860"][height="300"]',{config:b.renderChart})])])])}}}(window.m,window.Chart,window._,window.c.h),window.c.ProjectChartContributionTotalPerDay=function(a,b,c,d){return{controller:function(a){var e=a.collection()[0],f=function(){return[{label:"Apoios confirmados por dia",fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:c.map(e.source,function(a){return a.total})}]},g=function(a,g){if(!g){Object.defineProperty(a,"offsetHeight",{get:function(){return a.height}}),Object.defineProperty(a,"offsetWidth",{get:function(){return a.width}});var h=a.getContext("2d");new b(h).Line({labels:c.map(e.source,function(a){return d.momentify(a.paid_at)}),datasets:f()})}};return{renderChart:g}},view:function(b){return a(".card.u-radius.medium.u-marginbottom-30",[a(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","Apoios confirmados por dia"),a(".w-row",[a(".w-col.w-col-12",[a('canvas[id="chart"][width="860"][height="300"]',{config:b.renderChart})])])])}}}(window.m,window.Chart,window._,window.c.h),window.c.ProjectContributionsPerLocationTable=function(a,b,c,d){return{controller:function(c){var e=a.postgrest.filtersVM({project_id:"eq"}),f=a.prop([]),g=function(a){return function(){var b=f(),c=b[0],e=d.sortBy(c.source,a);void 0===c.orderFilter&&(c.orderFilter="DESC"),"DESC"==c.orderFilter&&(e=e.reverse()),c.source=e,c.orderFilter="DESC"==c.orderFilter?"ASC":"DESC",f(b)}};return e.project_id(c.resourceId),b.projectContributionsPerLocation.getRow(e.parameters()).then(f),{contributionsPerLocation:f,generateSort:g}},view:function(b){return a(".project-contributions-per-location",[a(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","Localização geográfica dos apoios"),b.contributionsPerLocation().map(function(e){return a(".table-outer.u-marginbottom-60",[a(".w-row.table-row.fontweight-semibold.fontsize-smaller.header",[a(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[a("div","Estado")]),a('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col[data-ix="sort-arrows"]',[a('a.link-hidden[href="javascript:void(0);"]',{onclick:b.generateSort("total_contributions")},["Apoios  ",a("span.fa.fa-sort",".")])]),a('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col[data-ix="sort-arrows"]',[a('a.link-hidden[href="javascript:void(0);"]',{onclick:b.generateSort("total_contributed")},["R$ apoiados ",a("span.w-hidden-small.w-hidden-tiny","(% do total) ")," ",a("span.fa.fa-sort",".")])])]),a(".table-inner.fontsize-small",[d.map(e.source,function(b){return a(".w-row.table-row",[a(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[a("div",b.state_acronym)]),a(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[a("div",b.total_contributions)]),a(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[a("div","R$ "+c.formatNumber(b.total_contributed,2,3)+"  ("+b.total_on_percentage.toFixed(2)+"%)   ")])])})])])})])}}}(window.m,window.c.models,window.c.h,window._),window.c.ProjectReminderCount=function(a){return{view:function(b,c){var d=c.resource;return a("#project-reminder-count.card.u-radius.u-text-center.medium.u-marginbottom-80",[a(".fontsize-large.fontweight-semibold","Total de pessoas que clicaram no botão Lembrar-me"),a(".fontsize-smaller.u-marginbottom-30","Eles receberão um lembrete por email 48 horas antes do término de sua campanha"),a(".fontsize-jumbo",d.reminder_count)])}}}(window.m),window.c.TeamMembers=function(a,b,c){return{controller:function(){var d={collection:b.prop([])},e=function(b,c){return a.map(a.range(Math.ceil(b.length/c)),function(a){return b.slice(a*c,(a+1)*c)})};return c.teamMember.getPage().then(function(a){d.collection(e(a,4))}),{vm:d}},view:function(c){return b("#team-members-static.w-section.section",[b(".w-container",[a.map(c.vm.collection(),function(c){return b(".w-row.u-text-center",[a.map(c,function(a){return b(".team-member.w-col.w-col-3.w-col-small-3.w-col-tiny-6.u-marginbottom-40",[b('a.alt-link[href="/users/'+a.id+'"]',[b('img.thumb.big.u-round.u-marginbottom-10[src="'+a.img+'"]'),b(".fontweight-semibold.fontsize-base",a.name)]),b(".fontsize-smallest.fontcolor-secondary","Apoiou "+a.total_contributed_projects+" projetos")])})])})])])}}}(window._,window.m,window.c.models),window.c.TeamTotal=function(a,b,c){return{controller:function(){var b={collection:a.prop([])};return c.teamTotal.getRow().then(function(a){b.collection(a)}),{vm:b}},view:function(c){return a("#team-total-static.w-section.section-one-column.u-margintop-40.u-text-center.u-marginbottom-20",[c.vm.collection().map(function(c){return a(".w-container",[a(".w-row",[a(".w-col.w-col-2"),a(".w-col.w-col-8",[a(".fontsize-base.u-marginbottom-30","Hoje somos "+c.member_count+" pessoas espalhadas por "+c.total_cities+" cidades em "+c.countries.length+" países ("+c.countries.toString()+")! O Catarse é independente, sem investidores, de código aberto e construído com amor. Nossa paixão é construir um ambiente onde cada vez mais projetos possam ganhar vida."),a(".fontsize-larger.lineheight-tight.text-success","Nossa equipe, junta, já apoiou R$"+b.formatNumber(c.total_amount)+" para "+c.total_contributed_projects+" projetos!")]),a(".w-col.w-col-2")])])})])}}}(window.m,window.c.h,window.c.models),window.c.pages.Team=function(a,b){return{view:function(){return a("#static-team-app",[a.component(b.TeamTotal),a.component(b.TeamMembers)])}}}(window.m,window.c),window.c.project.Insights=function(a,b,c,d){return{controller:function(b){var d=a.postgrest.filtersVM({project_id:"eq"}),e=a.prop([]),f=a.prop([]);return d.project_id(b.root.getAttribute("data-id")),c.projectDetail.getRow(d.parameters()).then(e),c.projectContributionsPerDay.getRow(d.parameters()).then(f),{vm:d,projectDetails:e,contributionsPerDay:f}},view:function(c){return d.map(c.projectDetails(),function(d){return a(".project-insights",[a(".w-row.u-marginbottom-40",[a(".w-col.w-col-2"),a(".w-col.w-col-8.dashboard-header.u-text-center",[a.component(b.AdminProjectDetailsCard,{resource:d}),a.component(b.AdminProjectDetailsExplanation,{resource:d})]),a(".w-col.w-col-2")]),function(d){return d.is_published?[a(".divider"),a(".w-section.section-one-column.bg-gray.before-footer",[a(".w-row",[a(".w-col.w-col-12.dashboard-header.u-text-center",{style:{"min-height":"300px"}},[a.component(b.ProjectChartContributionTotalPerDay,{collection:c.contributionsPerDay})])]),a(".w-row",[a(".w-col.w-col-12.dashboard-header.u-text-center",{style:{"min-height":"300px"}},[a.component(b.ProjectChartContributionAmountPerDay,{collection:c.contributionsPerDay})])]),a(".w-row",[a(".w-col.w-col-12.dashboard-header.u-text-center",[a.component(b.ProjectContributionsPerLocationTable,{resourceId:c.vm.project_id()})])]),a(".w-row",[a(".w-col.w-col-12.dashboard-header.u-text-center",[a.component(b.ProjectReminderCount,{resource:d})])])])]:void 0}(d)])})}}}(window.m,window.c,window.c.models,window._);